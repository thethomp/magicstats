from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from mtg.items import MtgItem


class MtgSpider(BaseSpider):
	name = 'mtg'
	allowed_domains = ["magiccards.info"]
#	start_urls = ["http://magiccards.info/al/en.html"]
	start_urls = [u'http://magiccards.info/avr/en.html', u'http://magiccards.info/dka/en.html', u'http://magiccards.info/isd/en.html', u'http://magiccards.info/nph/en.html', u'http://magiccards.info/mbs/en.html', u'http://magiccards.info/som/en.html', u'http://magiccards.info/roe/en.html', u'http://magiccards.info/wwk/en.html', u'http://magiccards.info/zen/en.html', u'http://magiccards.info/arb/en.html', u'http://magiccards.info/cfx/en.html', u'http://magiccards.info/ala/en.html', u'http://magiccards.info/eve/en.html', u'http://magiccards.info/shm/en.html', u'http://magiccards.info/mt/en.html', u'http://magiccards.info/lw/en.html', u'http://magiccards.info/fut/en.html', u'http://magiccards.info/pc/en.html', u'http://magiccards.info/ts/en.html', u'http://magiccards.info/tsts/en.html', u'http://magiccards.info/cs/en.html', u'http://magiccards.info/ai/en.html', u'http://magiccards.info/ia/en.html', u'http://magiccards.info/di/en.html', u'http://magiccards.info/gp/en.html', u'http://magiccards.info/rav/en.html', u'http://magiccards.info/sok/en.html', u'http://magiccards.info/bok/en.html', u'http://magiccards.info/chk/en.html', u'http://magiccards.info/5dn/en.html', u'http://magiccards.info/ds/en.html', u'http://magiccards.info/mi/en.html', u'http://magiccards.info/sc/en.html', u'http://magiccards.info/le/en.html', u'http://magiccards.info/on/en.html', u'http://magiccards.info/ju/en.html', u'http://magiccards.info/tr/en.html', u'http://magiccards.info/od/en.html', u'http://magiccards.info/ap/en.html', u'http://magiccards.info/ps/en.html', u'http://magiccards.info/in/en.html', u'http://magiccards.info/pr/en.html', u'http://magiccards.info/ne/en.html', u'http://magiccards.info/mm/en.html', u'http://magiccards.info/ud/en.html', u'http://magiccards.info/ul/en.html', u'http://magiccards.info/us/en.html', u'http://magiccards.info/ex/en.html', u'http://magiccards.info/sh/en.html', u'http://magiccards.info/tp/en.html', u'http://magiccards.info/wl/en.html', u'http://magiccards.info/vi/en.html', u'http://magiccards.info/mr/en.html', u'http://magiccards.info/hl/en.html', u'http://magiccards.info/fe/en.html', u'http://magiccards.info/dk/en.html', u'http://magiccards.info/lg/en.html', u'http://magiccards.info/aq/en.html', u'http://magiccards.info/an/en.html', u'http://magiccards.info/m12/en.html', u'http://magiccards.info/m11/en.html', u'http://magiccards.info/m10/en.html', u'http://magiccards.info/10e/en.html', u'http://magiccards.info/9e/en.html', u'http://magiccards.info/8e/en.html', u'http://magiccards.info/7e/en.html', u'http://magiccards.info/6e/en.html', u'http://magiccards.info/5e/en.html', u'http://magiccards.info/4e/en.html', u'http://magiccards.info/rv/en.html', u'http://magiccards.info/un/en.html', u'http://magiccards.info/be/en.html', u'http://magiccards.info/al/en.html', u'http://magiccards.info/me4/en.html', u'http://magiccards.info/me3/en.html', u'http://magiccards.info/me2/en.html', u'http://magiccards.info/med/en.html', u'http://magiccards.info/pd3/en.html', u'http://magiccards.info/pd2/en.html', u'http://magiccards.info/pds/en.html', u'http://magiccards.info/dpa/en.html', u'http://magiccards.info/ch/en.html', u'http://magiccards.info/pc2/en.html', u'http://magiccards.info/cmd/en.html', u'http://magiccards.info/arc/en.html', u'http://magiccards.info/pch/en.html', u'http://magiccards.info/fvl/en.html', u'http://magiccards.info/fvr/en.html', u'http://magiccards.info/fve/en.html', u'http://magiccards.info/fvd/en.html', u'http://magiccards.info/ddi/en.html', u'http://magiccards.info/ddh/en.html', u'http://magiccards.info/ddg/en.html', u'http://magiccards.info/ddf/en.html', u'http://magiccards.info/pvc/en.html', u'http://magiccards.info/gvl/en.html', u'http://magiccards.info/dvd/en.html', u'http://magiccards.info/jvc/en.html', u'http://magiccards.info/evg/en.html', u'http://magiccards.info/cstd/en.html', u'http://magiccards.info/9eb/en.html', u'http://magiccards.info/8eb/en.html', u'http://magiccards.info/dm/en.html', u'http://magiccards.info/bd/en.html', u'http://magiccards.info/br/en.html', u'http://magiccards.info/at/en.html', u'http://magiccards.info/mgbc/en.html', u'http://magiccards.info/uh/en.html', u'http://magiccards.info/ug/en.html', u'http://magiccards.info/uhaa/en.html', u'http://magiccards.info/st2k/en.html', u'http://magiccards.info/st/en.html', u'http://magiccards.info/p3k/en.html', u'http://magiccards.info/po2/en.html', u'http://magiccards.info/po/en.html', u'http://magiccards.info/itp/en.html', u'http://magiccards.info/ced/en.html', u'http://magiccards.info/cedi/en.html', u'http://magiccards.info/15ann/en.html', u'http://magiccards.info/gpx/en.html', u'http://magiccards.info/pro/en.html', u'http://magiccards.info/mgdc/en.html', u'http://magiccards.info/wrl/en.html', u'http://magiccards.info/drc/en.html', u'http://magiccards.info/ptc/en.html', u'http://magiccards.info/rep/en.html', u'http://magiccards.info/mlp/en.html', u'http://magiccards.info/sum/en.html', u'http://magiccards.info/grc/en.html', u'http://magiccards.info/cp/en.html', u'http://magiccards.info/thgt/en.html', u'http://magiccards.info/arena/en.html', u'http://magiccards.info/fnmp/en.html', u'http://magiccards.info/mprp/en.html', u'http://magiccards.info/sus/en.html', u'http://magiccards.info/hho/en.html', u'http://magiccards.info/jr/en.html', u'http://magiccards.info/pot/en.html', u'http://magiccards.info/euro/en.html', u'http://magiccards.info/guru/en.html', u'http://magiccards.info/apac/en.html', u'http://magiccards.info/wotc/en.html', u'http://magiccards.info/uqc/en.html', u'http://magiccards.info/mbp/en.html']
	def parse(self, response):
		hxs = HtmlXPathSelector(response)
		cards = hxs.select('//tr')
		items = []
		for card in cards:
			item = MtgItem()
			item['name'] = card.select('td[2]/a/text()').extract()
			item['cardtype'] = card.select('td[3]/text()').extract()
			item['mana'] = card.select('td[4]/text()').extract()
			item['rarity'] = card.select('td[5]/text()').extract()
			item['artist'] = card.select('td[6]/text()').extract()
			items.append(item)
		return items
